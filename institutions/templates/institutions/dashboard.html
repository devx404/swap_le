{% extends "base.html" %}
{% load static %}


{% block title %}Dashboard{% endblock %}


{% block content %}
  <h1>Dashboard</h1>
 
 
 <div class="container">
	<div class="row">
	   <div class="col-md-12">
	   <details>
		  <summary>Usage Summary.</summary>
		  <ul class="ul list-style">
		  <li>
			
		  Assesment - <strong class="strong">{{current_details.li_current_assesments}}/{{current_details.li_max_assesments}}</strong></li>
		  <li>Staff - <strong class="strong">{{current_details.li_current_staff}}/{{current_details.li_max_staff}}</strong></li>
		  <li >Student - <strong class="strong">{{current_details.li_current_students}}/{{current_details.li_max_students}}</strong></li>
		  <li >Key - {{ current_details.li_key}}</li>
		  <li >Status - {% if current_details.li_current_status == 'acti'%}<span class="badge" style="color:#000!important;">Active</span></a>{% else %} <span class="badge" style="color:#000!important;">Expired</span></a>{% endif %}</li>
		  <li >License Expiration - {{current_details.li_expiration_date}}</li>
		  </ul>
		</details>
		<table>
			{{  current_details.as_table }}
		</table>
	   </div>
	</div>
	<br>
	<div class="row">
	   <div class="col-md-6">
		<div >Gender Diversity :</div>
	   
		<div id="canvas-holder" class="border border-dark">
			<canvas id="pie-chart"></canvas>
		</div>
	   </div>
	</div>
	<br>
	<div class="row"><h3>Your Institution Student Test/Assessment Performance</h3></div>
	<div class="row">
		<div class="col-md-4"></div>
		<div align="center" class="col-md-6" >
		 <!-- ------------------ Assessment Filter	----------------------- -->
		   <form method="post">
				 {% csrf_token %}
				 <div class="row">
						 <div class="col-md-8">
							<select  style="height:100%" id="assessment_id" name="assessment_id" class="form-control align-middle" data-live-search="true">
							<option value="">Please Select The Test/Assessment</option>
							 {% for data in all_instituion_assessments %}
							  <option value="{{data.id}}">{{ data.header }}</option>
							  {% endfor %}
							</select>
						</div>
						<div class="col-md-4">   <button class="btn btn-success" id="search_results">Search  Result</button></div>
				</div>
			</form>
		</div>
		
	</div>
	
	<div class="row">
		<div class="col-sm-12 col-md-12">
			<center>
				 <div style="">
					<canvas id="time-series-graph"></canvas>
				 </div>
			 </center>
	</div>
	
	
		
	</div>

 </div>
 
 

 
 
 
<script>
	studentCounting = [{{total_male}},{{total_female}}];
	studentUsername = [];
	studentMarks = [];
	assessmentHeader = "{{assessment_header}}"
	
	{% for data in result_obj %}
		studentUsername.push("{{data.registered_user.studentuser.username}}")
		studentMarks.push({{data.obtained_marks}})
	{% endfor %}
	$('#search_results').on('click', function() {
	  if( $("#assessment_id").val().length == 0){
		alert("Please select valid assessment/test.");
	  }
	});
   

</script>
	
<script src="{% static "js/institution_dashboard_script.js" %}"></script>
{% endblock %} 